// Generated by CoffeeScript 1.12.2
(function() {
  var BufferIterator, tools;

  tools = require('../tools');

  BufferIterator = require('../bufferIterator');

  module.exports.decode = function(buffer, offset) {
    var data, iterator, readData;
    iterator = new BufferIterator(buffer);
    data = tools.initBoxData(iterator);
    readData = function() {
      if (data.version === 1) {
        return iterator.read64();
      } else {
        return iterator.read32();
      }
    };
    data.creationTime = readData();
    data.modificationTime = readData();
    data.timeScale = iterator.read32();
    data.duration = readData();
    data.language = iterator.readIso639Lang();
    return data;
  };

  module.exports.encode = function(data) {
    var iterator, length, writeData;
    length = 20;
    if (data.version === 1) {
      length += 12;
    }
    iterator = tools.writeBoxData(data, length);
    writeData = function(value) {
      if (data.version === 1) {
        return iterator.write64(value);
      } else {
        return iterator.write32(value);
      }
    };
    writeData(data.creationTime);
    writeData(data.modificationTime);
    iterator.write32(data.timeScale);
    writeData(data.duration);
    iterator.writeIso639Lang(data.language);
    return iterator.buffer;
  };

}).call(this);
